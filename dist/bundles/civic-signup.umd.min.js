!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs/BehaviorSubject"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/core","rxjs/BehaviorSubject","@angular/common"],e):e(t["civic-signup"]={},t.ng.core,t.Rx,t.ng.common)}(this,function(t,e,i,n){"use strict";var o=function(){function t(){this.flagSource=new i.BehaviorSubject(-1),this.currentFlag=this.flagSource.asObservable()}return t.prototype.init=function(t){this.civicObject=t},t.prototype.updateFlag=function(t){console.log("updating flag "+t),this.flagSource.next(t)},t.prototype.getJwtToken=function(){return this.civicObject.updateFlag(),this.civicObject.getJwtToken()},t.prototype.getSignupObject=function(){return this.civicObject.updateFlag(),this.civicObject},t.prototype.getError=function(){return this.civicObject.updateFlag(),this.civicObject.getError()},t.prototype.getFlag=function(){return this.civicObject.updateFlag(),this.civicObject.flag},t}();o.decorators=[{type:e.Injectable}],o.ctorParameters=function(){return[]};var r=function(){function t(t,e){this.data=e,this.flag=-1,this.data.updateFlag(this.flag),this.Id=t.nativeElement.getAttribute("appId"),this.buttonText=t.nativeElement.getAttribute("buttonLabel"),this.defaultStyle=t.nativeElement.hasAttribute("default")}return t.prototype.setCurrentClasses=function(){this.currentClasses={"civic-button-a":this.defaultStyle,medium:this.defaultStyle}},t.prototype.ngOnInit=function(){this.civicSip=new civic.sip({appId:this.Id}),this.setCurrentClasses(),this.data.init(this),window.buffer_service=this.data},t.prototype.updateFlag=function(){this.flag=window.buffer_flag},t.prototype.sendSignUpRequest=function(){return this.civicSip.signup({style:"popup",scopeRequest:this.civicSip.ScopeRequests.BASIC_SIGNUP}),this.civicSip.on("auth-code-received",function(t){this.jwtToken=t.response,window.buffer_flag=1,window.buffer_jwt=this.jwtToken,window.buffer_service.updateFlag(1),console.log(this.jwtToken)}),this.civicSip.on("user-cancelled",function(t){console.log("user cancelled"),window.buffer_flag=2,window.buffer_service.updateFlag(2)}),this.civicSip.on("read",function(t){window.buffer_flag=3,window.buffer_service.updateFlag(3)}),this.civicSip.on("civic-sip-error",function(t){window.buffer_flag=4,window.buffer_error=t,window.buffer_service.updateFlag(4)}),0},t.prototype.getJwtToken=function(){return this.jwtToken=window.buffer_jwt,this.flag=window.buffer_flag,1==this.flag?this.jwtToken:(console.log("Error jwtToken not yet recieved"),null)},t.prototype.getError=function(){return 4==this.flag?this.error:(console.log("No errors while sending signup request..check flag number to find out more"),null)},t}();r.decorators=[{type:e.Component,args:[{selector:"app-civic",template:'\n<button id="signupButton" [ngClass]="currentClasses" type="button" (click)="sendSignUpRequest()">\n  <span>{{buttonText}}</span>\n</button>',styles:[""]}]}],r.ctorParameters=function(){return[{type:e.ElementRef},{type:o}]};var c=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[o]}},t}();c.decorators=[{type:e.NgModule,args:[{imports:[n.CommonModule],providers:[o],declarations:[r],exports:[r],bootstrap:[r]}]}],c.ctorParameters=function(){return[]},t.CivicModule=c,t.CivicSignupService=o,t.Éµa=r,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=civic-signup.umd.min.js.map
